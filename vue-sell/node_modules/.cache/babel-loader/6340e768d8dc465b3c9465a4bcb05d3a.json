{"remainingRequest":"/Users/tanlingling/Desktop/project-e/sell/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/tanlingling/Desktop/project-e/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tanlingling/Desktop/project-e/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tanlingling/Desktop/project-e/sell/src/components/goods/goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tanlingling/Desktop/project-e/sell/src/components/goods/goods.vue","mtime":1548074302676},{"path":"/Users/tanlingling/Desktop/project-e/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanlingling/Desktop/project-e/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tanlingling/Desktop/project-e/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanlingling/Desktop/project-e/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getGoods } from 'api';\nimport ShopCart from 'components/shop-cart/shop-cart';\nimport CartControl from 'components/cart-control/cart-control';\nimport SupportIco from 'components/support-ico/support-ico';\nimport Bubble from 'components/bubble/bubble';\nexport default {\n  name: 'goods',\n  props: {\n    data: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      goods: [],\n      slideOptions: {\n        click: false,\n        directionLockThreshold: 0\n      }\n    };\n  },\n  methods: {\n    fetch: function fetch() {\n      var _this = this;\n\n      getGoods().then(function (goods) {\n        _this.goods = goods;\n      });\n    },\n    onAdd: function onAdd(el) {\n      this.$refs.shopCart.drop(el);\n    }\n  },\n  computed: {\n    seller: function seller() {\n      return this.data.seller;\n    },\n    selectFoods: function selectFoods() {\n      var ret = [];\n      this.goods.forEach(function (good) {\n        good.foods.forEach(function (food) {\n          if (food.count) {\n            ret.push(food);\n          }\n        });\n      });\n      return ret;\n    },\n    barTxts: function barTxts() {\n      var ret = [];\n      this.goods.forEach(function (good) {\n        var type = good.type,\n            name = good.name,\n            foods = good.foods;\n        var count = 0;\n        foods.forEach(function (food) {\n          count += food.count || 0;\n        });\n        ret.push({\n          type: type,\n          name: name,\n          count: count\n        });\n      });\n      return ret;\n    }\n  },\n  components: {\n    ShopCart: ShopCart,\n    CartControl: CartControl,\n    SupportIco: SupportIco,\n    Bubble: Bubble\n  }\n};",{"version":3,"sources":["goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA,SAAA,QAAA,QAAA,KAAA;AACA,OAAA,QAAA,MAAA,gCAAA;AACA,OAAA,WAAA,MAAA,sCAAA;AACA,OAAA,UAAA,MAAA,oCAAA;AACA,OAAA,MAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA;AADA,GAFA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,sBAAA,EAAA;AAFA;AAFA,KAAA;AAOA,GAlBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AAAA;;AACA,MAAA,QAAA,GAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,KAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,KANA,iBAMA,EANA,EAMA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA;AARA,GAnBA;AA6BA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,IAAA,CAAA,MAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,KAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,SAJA;AAKA,OANA;AAOA,aAAA,GAAA;AACA,KAdA;AAeA,IAAA,OAfA,qBAeA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AAAA,YACA,IADA,GACA,IADA,CACA,IADA;AAAA,YACA,IADA,GACA,IADA,CACA,IADA;AAAA,YACA,KADA,GACA,IADA,CACA,KADA;AAEA,YAAA,KAAA,GAAA,CAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,IAAA,IAAA,CAAA,KAAA,IAAA,CAAA;AACA,SAFA;AAGA,QAAA,GAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,IAAA,EAAA,IAFA;AAGA,UAAA,KAAA,EAAA;AAHA,SAAA;AAKA,OAXA;AAYA,aAAA,GAAA;AACA;AA9BA,GA7BA;AA6DA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,WAAA,EAAA,WAFA;AAGA,IAAA,UAAA,EAAA,UAHA;AAIA,IAAA,MAAA,EAAA;AAJA;AA7DA,CAAA","sourcesContent":["<template>\n  <div class=\"goods\">\n    <div class=\"scroll-nav-wp\">\n      <cube-scroll-nav\n        :side=\"true\"\n        :data=\"goods\"\n        :options=\"slideOptions\"\n        v-if=\"goods.length\"\n      >\n        <template slot=\"bar\" slot-scope=\"props\">\n          <cube-scroll-nav-bar\n            direction=\"vertical\"\n            :labels=\"props.labels\"\n            :txts=\"barTxts\"\n            :current=\"props.current\"\n          >\n            <template slot-scope=\"props\">\n              <div class=\"text\">\n                <support-ico v-if=\"props.txt.type >= 1\" :size=\"3\" :type=\"props.txt.type\"></support-ico>\n                <span>{{props.txt.name}}</span>\n                <span class=\"num\" v-if=\"props.txt.count\">\n                  <bubble :num=\"props.txt.count\"></bubble>\n                </span>\n              </div>\n            </template>\n          </cube-scroll-nav-bar>\n        </template>\n        <cube-scroll-nav-panel\n          v-for=\"good in goods\"\n          :key=\"good.name\"\n          :label=\"good.name\"\n          :title=\"good.name\"\n        >\n          <ul class=\"foods-list\">\n            <li class=\"foods-item\" v-for=\"(food, index) in good.foods\" :key=\"index\">\n              <img class=\"food-img\" :src=\"food.image\">\n              <div class=\"food-info\">\n                <h3 class=\"name\">{{food.name}}</h3>\n                <div class=\"description\" v-if=\"food.description\">{{food.description}}</div>\n                <div class=\"sell-count\">\n                  <span>月售{{food.sellCount}}份</span>\n                  <span>好评率{{food.rating}}%</span>\n                </div>\n                <div class=\"price\">\n                  <span class=\"new-price\">¥{{food.price}}</span>\n                  <del class=\"old-price\" v-if=\"food.oldPrice\">¥{{food.oldPrice}}</del>\n                </div>\n              </div>\n              <div class=\"cart-control-wp\">\n                <cart-control @add=\"onAdd\" :food=\"food\"></cart-control>\n              </div>\n            </li>\n          </ul>\n        </cube-scroll-nav-panel>\n      </cube-scroll-nav>      \n    </div>\n    <div class=\"shop-cart-wp\">\n      <shop-cart ref=\"shopCart\" \n        :select-foods=\"selectFoods\" \n        :delivery-price=\"seller.deliveryPrice\" \n        :min-price=\"seller.minPrice\">\n      </shop-cart>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { getGoods } from 'api'\n  import ShopCart from 'components/shop-cart/shop-cart'\n  import CartControl from 'components/cart-control/cart-control'\n  import SupportIco from 'components/support-ico/support-ico'\n  import Bubble from 'components/bubble/bubble'\n\n  export default {\n    name: 'goods',\n    props: {\n      data: {\n        type: Object,\n        default () {\n          return {}\n        }\n      }\n    },\n    data () {\n      return {\n        goods: [],\n        slideOptions: {\n          click: false,\n          directionLockThreshold: 0\n        }      \n      }\n    },\n    methods: {\n      fetch () {\n        getGoods().then(goods => {\n          this.goods = goods\n        })\n      },\n      onAdd (el) {\n        this.$refs.shopCart.drop(el)\n      }\n    },\n    computed: {\n      seller () {\n        return this.data.seller\n      },\n      selectFoods () {\n        let ret = []\n        this.goods.forEach((good) => {\n          good.foods.forEach((food) => {\n            if (food.count) {\n              ret.push(food)\n            }\n          })\n        })\n        return ret\n      },\n      barTxts () {\n        let ret = []\n        this.goods.forEach((good) => {\n          const {type, name, foods} = good\n          let count = 0\n          foods.forEach((food) => {\n            count += food.count || 0\n          })\n          ret.push({\n            type,\n            name,\n            count\n          })\n        })\n        return ret\n      }\n    },\n    components: {\n      ShopCart,\n      CartControl,\n      SupportIco,\n      Bubble\n    }\n  }\n</script>\n\n<style lang='stylus' scoped>\n  @import '~common/stylus/variable'\n  @import '~common/stylus/mixin'\n\n  .goods\n    position: relative\n    height: 100%\n    text-align: left\n    .scroll-nav-wp\n      position: absolute\n      top: 0\n      left: 0\n      bottom: 48px\n      width: 100%\n      >>> .cube-scroll-nav-bar\n        width: 80px\n        overflow: hidden\n        .cube-scroll-nav-bar-item\n          position: relative\n          padding: 0 12px\n          height: 54px\n          text-align: left \n          display: flex\n          align-items: center\n          white-space: normal\n          line-height: 14px\n          font-size: $fontsize-small\n          background-color: $color-background-ssss\n          &:after\n            display: block\n            content: ''\n            width: 56px\n            height: 1px\n            position: absolute \n            bottom: 0\n            left: 12px\n            background-color: $color-row-line\n        .cube-scroll-nav-bar-item_active\n          background-color: $color-white\n          color: $color-dark-grey\n          height: 55px\n          margin-top: -1px\n          &:after\n            display: none\n        .text\n          position: relative\n          width: 56px\n          vertical-align: middle\n          .num\n            position: absolute \n            right: -6px\n            top: -8px\n      >>> .cube-scroll-nav-panel-title\n        height: 26px\n        line-height: 26px\n        background-color: $color-background-ssss\n        padding-left: 14px\n        border-left: 3px solid $color-col-line\n        font-size: $fontsize-small\n        color: $color-font-light\n      >>> .cube-scroll-nav-panel\n        .foods-item\n          position: relative\n          display: flex\n          padding: 18px 0\n          margin: 0 18px\n          border-bottom: 1px solid $color-row-line\n          overflow: hidden\n          &:last-child\n            border-bottom: 0\n          .food-img\n            flex: 0 0 60px\n            width: 60px\n            height: 60px\n            margin-right: 10px\n          .food-info\n            .name\n              padding: 2px 0 8px\n              font-size: $fontsize-large\n            .description\n            .sell-count\n              font-size: $fontsize-small-s\n              color: $color-font-light\n              margin-bottom: 8px\n              span\n                margin-right: 12px\n            .price\n              font-weight: bold\n              .new-price\n                color: $color-red\n                font-size: $fontsize-large\n                margin-right: 8px\n              .old-price\n                font-size: $fontsize-small-s\n                color: $color-font-light\n          .cart-control-wp\n            position: absolute \n            bottom: 12px\n            right: 0\n    .shop-cart-wp\n      position: absolute \n      bottom: 0\n      left: 0\n      width: 100%\n      height: 48px\n      z-index: 100\n</style>\n"],"sourceRoot":"src/components/goods"}]}