{"remainingRequest":"/Users/tanlingling/git/vue-sell/node_modules/thread-loader/dist/cjs.js!/Users/tanlingling/git/vue-sell/node_modules/babel-loader/lib/index.js??ref--16-2!/Users/tanlingling/git/vue-sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tanlingling/git/vue-sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tanlingling/git/vue-sell/src/components/food/food.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tanlingling/git/vue-sell/src/components/food/food.vue","mtime":1548296440283},{"path":"/Users/tanlingling/git/vue-sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanlingling/git/vue-sell/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanlingling/git/vue-sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/tanlingling/git/vue-sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tanlingling/git/vue-sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport popupMixin from 'common/mixins/popup';\nimport Split from 'components/split/split';\nimport CartControl from 'components/cart-control/cart-control';\nimport RatingSelect from 'components/rating-select/rating-select';\nimport ratingsMixin from 'common/mixins/ratings';\nvar EVENT_SHOW = 'show';\nvar EVENT_LEAVE = 'leave';\nvar EVENT_ADD = 'add';\nexport default {\n  name: 'food',\n  mixins: [popupMixin, ratingsMixin],\n  props: {\n    food: {\n      type: Object\n    }\n  },\n  data: function data() {\n    return {\n      desc: {\n        all: '全部',\n        positive: '推荐',\n        negative: '吐槽'\n      }\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.$on(EVENT_SHOW, function () {\n      _this.$nextTick(function () {\n        _this.$refs.scroll.refresh();\n      });\n    });\n  },\n  methods: {\n    addFood: function addFood(target) {\n      this.$emit(EVENT_ADD, target);\n    },\n    addFirst: function addFirst(event) {\n      this.$set(this.food, 'count', 1);\n      this.$emit(EVENT_ADD, event.target);\n    },\n    onLeave: function onLeave() {\n      this.$emit(EVENT_LEAVE);\n    }\n  },\n  computed: {\n    ratings: function ratings() {\n      return this.food.ratings;\n    }\n  },\n  components: {\n    Split: Split,\n    CartControl: CartControl,\n    RatingSelect: RatingSelect\n  }\n};",{"version":3,"sources":["food.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA,OAAA,UAAA,MAAA,qBAAA;AACA,OAAA,KAAA,MAAA,wBAAA;AACA,OAAA,WAAA,MAAA,sCAAA;AACA,OAAA,YAAA,MAAA,wCAAA;AACA,OAAA,YAAA,MAAA,uBAAA;AAEA,IAAA,UAAA,GAAA,MAAA;AACA,IAAA,WAAA,GAAA,OAAA;AACA,IAAA,SAAA,GAAA,KAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,MAAA,EAAA,CAAA,UAAA,EAAA,YAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,IAFA;AAGA,QAAA,QAAA,EAAA;AAHA;AADA,KAAA;AAOA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAA,OAAA;AACA,OAFA;AAGA,KAJA;AAKA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,mBACA,MADA,EACA;AACA,WAAA,KAAA,CAAA,SAAA,EAAA,MAAA;AACA,KAHA;AAIA,IAAA,QAJA,oBAIA,KAJA,EAIA;AACA,WAAA,IAAA,CAAA,KAAA,IAAA,EAAA,OAAA,EAAA,CAAA;AACA,WAAA,KAAA,CAAA,SAAA,EAAA,KAAA,CAAA,MAAA;AACA,KAPA;AAQA,IAAA,OARA,qBAQA;AACA,WAAA,KAAA,CAAA,WAAA;AACA;AAVA,GAxBA;AAoCA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,aAAA,KAAA,IAAA,CAAA,OAAA;AACA;AAHA,GApCA;AAyCA,EAAA,UAAA,EAAA;AACA,IAAA,KAAA,EAAA,KADA;AAEA,IAAA,WAAA,EAAA,WAFA;AAGA,IAAA,YAAA,EAAA;AAHA;AAzCA,CAAA","sourcesContent":["<template>\n  <transition\n    name=\"move\"\n    @after-leave=\"onLeave\"\n  >\n    <div class=\"food\" v-show=\"visible\">\n      <cube-scroll :data=\"computedRatings\" ref=\"scroll\">\n        <div class=\"food-content\">\n          <div class=\"image-header\">\n            <img :src=\"food.image\">\n            <div class=\"back\" @click=\"hide\">\n              <i class=\"icon-arrow_lift\"></i>\n            </div>\n          </div>\n          <div class=\"content\">\n            <h1 class=\"title\">{{food.name}}</h1>\n            <div class=\"detail\">\n              <span class=\"sell-count\">月售{{food.sellCount}}份</span>\n              <span class=\"rating\">好评率{{food.rating}}%</span>\n            </div>\n            <div class=\"price\">\n              <span class=\"now\">￥{{food.price}}</span><span class=\"old\" v-show=\"food.oldPrice\">￥{{food.oldPrice}}</span>\n            </div>\n            <div class=\"cart-control-wrapper\">\n              <cart-control @add=\"addFood\" :food=\"food\"></cart-control>\n            </div>\n            <transition name=\"fade\">\n              <div @click.stop=\"addFirst\" class=\"buy\" v-show=\"!food.count\">\n                加入购物车\n              </div>\n            </transition>\n          </div>\n          <split v-show=\"food.info\"></split>\n          <div class=\"info\" v-show=\"food.info\">\n            <h1 class=\"title\">商品信息</h1>\n            <p class=\"text\">{{food.info}}</p>\n          </div>\n          <split></split>\n          <div class=\"rating\">\n            <h1 class=\"title\">商品评价</h1>\n            <rating-select\n              @select=\"onSelect\"\n              @toggle=\"onToggle\"\n              :selectType=\"selectType\"\n              :onlyContent=\"onlyContent\"\n              :desc=\"desc\"\n              :ratings=\"computedRatings\">\n            </rating-select>\n            <div class=\"rating-wrapper\">\n              <ul v-show=\"computedRatings && computedRatings.length\">\n                <li\n                  v-for=\"(rating,index) in computedRatings\"\n                  class=\"rating-item border-bottom-1px\"\n                  :key=\"index\"\n                >\n                  <div class=\"user\">\n                    <span class=\"name\">{{rating.username}}</span>\n                    <img class=\"avatar\" width=\"12\" height=\"12\" :src=\"rating.avatar\">\n                  </div>\n                  <div class=\"time\">{{format(rating.rateTime)}}</div>\n                  <p class=\"text\">\n                    <span :class=\"{'icon-thumb_up':rating.rateType===0,'icon-thumb_down':rating.rateType===1}\"></span>{{rating.text}}\n                  </p>\n                </li>\n              </ul>\n              <div class=\"no-rating\" v-show=\"!computedRatings || !computedRatings.length\">暂无评价</div>\n            </div>\n          </div>\n        </div>\n      </cube-scroll>\n    </div>\n  </transition>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import popupMixin from 'common/mixins/popup'\n  import Split from 'components/split/split'\n  import CartControl from 'components/cart-control/cart-control'\n  import RatingSelect from 'components/rating-select/rating-select'\n  import ratingsMixin from 'common/mixins/ratings'\n\n  const EVENT_SHOW = 'show'\n  const EVENT_LEAVE = 'leave'\n  const EVENT_ADD = 'add'\n\n  export default {\n    name: 'food',\n    mixins: [popupMixin, ratingsMixin],\n    props: {\n      food: {\n        type: Object\n      }\n    },\n    data () {\n      return {\n        desc: {\n          all: '全部',\n          positive: '推荐',\n          negative: '吐槽'\n        }\n      }\n    },\n    created () {\n      this.$on(EVENT_SHOW, () => {\n        this.$nextTick(() => {\n          this.$refs.scroll.refresh()\n        })\n      })\n    },\n    methods: {\n      addFood (target) {\n        this.$emit(EVENT_ADD, target)\n      },\n      addFirst (event) {\n        this.$set(this.food, 'count', 1)\n        this.$emit(EVENT_ADD, event.target)\n      },\n      onLeave () {\n        this.$emit(EVENT_LEAVE)\n      }\n    },\n    computed: {\n      ratings () {\n        return this.food.ratings\n      }\n    },\n    components: {\n      Split,\n      CartControl,\n      RatingSelect\n    }\n  }\n</script>\n\n<style lang=\"stylus\" scoped>\n  @import \"~common/stylus/variable\"\n  @import \"~common/stylus/mixin.styl\"\n\n  .food\n    position: fixed\n    left: 0\n    top: 0\n    bottom: 48px\n    z-index: 30\n    width: 100%\n    background: $color-white\n    &.move-enter-active, &.move-leave-active\n      transition: all 0.3s linear\n    &.move-enter, &.move-leave-active\n      transform: translate3d(100%, 0, 0)\n    .image-header\n      position: relative\n      width: 100%\n      height: 0\n      padding-top: 100%\n      img\n        position: absolute\n        top: 0\n        left: 0\n        width: 100%\n        height: 100%\n      .back\n        position: absolute\n        top: 10px\n        left: 0\n        .icon-arrow_lift\n          display: block\n          padding: 10px\n          font-size: $fontsize-large-xx\n          color: $color-white\n\n    .content\n      position: relative\n      padding: 18px\n      .title\n        line-height: 14px\n        margin-bottom: 8px\n        font-size: $fontsize-medium\n        font-weight: 700\n        color: $color-dark-grey\n      .detail\n        margin-bottom: 18px\n        line-height: 10px\n        height: 10px\n        .sell-count, .rating\n          font-size: $fontsize-small-s\n          color: $color-light-grey\n        .sell-count\n          margin-right: 12px\n      .price\n        line-height: 24px\n        font-weight: 700\n        .now\n          margin-right: 8px\n          font-size: 14px\n          color: $color-red\n        .old\n          text-decoration: line-through\n          font-size: $fontsize-small-s\n          color: $color-light-grey\n      .cart-control-wrapper\n        position: absolute\n        right: 18px\n        bottom: 16px\n      .buy\n        position: absolute\n        right: 18px\n        bottom: 18px\n        z-index: 10\n        height: 24px\n        line-height: 24px\n        padding: 0 12px\n        box-sizing: border-box\n        border-radius: 12px\n        font-size: $fontsize-small-s\n        color: $color-white\n        background: $color-blue\n        opacity: 1\n        &.fade-enter-active, &.fade-leave-active\n          transition: all 0.3s\n        &.fade-enter, &.fade-leave-active\n          opacity: 0\n          z-index: -1\n    .info\n      padding: 18px\n      .title\n        line-height: 14px\n        margin-bottom: 6px\n        font-size: $fontsize-medium\n        color: $color-dark-grey\n      .text\n        line-height: 24px\n        padding: 0 8px\n        font-size: $fontsize-small\n        color: $color-grey\n    .rating\n      padding-top: 18px\n      .title\n        line-height: 14px\n        margin-left: 18px\n        font-size: $fontsize-medium\n        color: $color-dark-grey\n      .rating-wrapper\n        padding: 0 18px\n        .rating-item\n          position: relative\n          padding: 16px 0\n          &:last-child\n            border-none()\n          .user\n            position: absolute\n            right: 0\n            top: 16px\n            display: flex\n            align-items: center\n            line-height: 12px\n            .name\n              margin-right: 6px\n              font-size: $fontsize-small-s\n              color: $color-light-grey\n            .avatar\n              border-radius: 50%\n          .time\n            margin-bottom: 6px\n            line-height: 12px\n            font-size: $fontsize-small-s\n            color: $color-light-grey\n          .text\n            line-height: 16px\n            font-size: $fontsize-small\n            color: $color-dark-grey\n            .icon-thumb_up, .icon-thumb_down\n              margin-right: 4px\n              line-height: 16px\n              font-size: $fontsize-small\n            .icon-thumb_up\n              color: $color-blue\n            .icon-thumb_down\n              color: $color-light-grey\n\n        .no-rating\n          padding: 16px 0\n          font-size: $fontsize-small\n          color: $color-light-grey\n</style>\n"],"sourceRoot":"src/components/food"}]}